<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>逆龄算法 · 生理年龄自测 | 陆大夫</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1a1a; --ink-light: #444; --gold: #b8860b; --gold-light: #d4a017;
    --gold-pale: #f5edd8; --cream: #faf8f3; --white: #ffffff; --border: #e8e2d4;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Noto Sans SC', sans-serif; background: var(--cream); color: var(--ink); line-height: 1.6; }
  
  /* 原版头部 & 封面 */
  .header { background: var(--ink); color: var(--white); padding: 18px 32px; display: flex; align-items: center; border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 100; }
  .header-logo { width: 36px; height: 36px; background: var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Cormorant Garamond', serif; font-weight: 600; color: var(--ink); margin-right: 12px; }
  
  .hero { background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%); color: var(--white); padding: 60px 32px; text-align: center; }
  .hero h1 { font-family: 'Noto Serif SC', serif; font-size: 28px; letter-spacing: 4px; }
  .hero h1 em { color: var(--gold-light); font-style: normal; }

  /* 进度条 */
  .progress-wrap { background: var(--white); padding: 15px 32px; border-bottom: 1px solid var(--border); position: sticky; top: 72px; z-index: 90; }
  .progress-bar { height: 3px; background: var(--border); border-radius: 2px; }
  .progress-fill { height: 100%; background: var(--gold); width: 0%; transition: width 0.3s; }

  /* 问卷卡片 */
  .main { max-width: 700px; margin: 0 auto; padding: 20px; }
  .question-block { background: var(--white); border-radius: 12px; border: 1px solid var(--border); padding: 24px; margin-bottom: 20px; transition: 0.3s; }
  .question-block.active { border-color: var(--gold); box-shadow: 0 4px 12px rgba(184,134,11,0.1); }
  .q-text { font-family: 'Noto Serif SC', serif; font-size: 17px; margin-bottom: 15px; font-weight: 600; }
  
  .q-options { display: grid; gap: 10px; }
  .q-option { display: flex; align-items: center; padding: 14px; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; transition: 0.2s; font-size: 15px; }
  .q-option:hover { border-color: var(--gold); background: var(--gold-pale); }
  .q-option.selected { background: var(--gold-pale); border-color: var(--gold); font-weight: 500; }
  
  .date-input { width: 100%; max-width: 200px; padding: 12px; border: 1px solid var(--border); border-radius: 6px; font-family: 'Cormorant Garamond', serif; font-size: 18px; text-align: center; }

  /* 结果页样式 */
  #result-page { display: none; }
  .result-hero { background: var(--ink); color: var(--white); border-radius: 16px; padding: 50px 20px; text-align: center; margin-bottom: 30px; }
  .result-age { font-size: 80px; font-family: 'Cormorant Garamond', serif; color: var(--gold-light); line-height: 1; margin: 15px 0; }
  .advice-card { background: var(--white); border-radius: 12px; padding: 25px; border-left: 4px solid var(--gold); }

  .btn-submit { background: var(--ink); color: var(--white); border: 2px solid var(--gold); padding: 18px; width: 100%; font-size: 16px; border-radius: 6px; cursor: pointer; margin-top: 20px; transition: 0.3s; }
  .btn-submit:disabled { opacity: 0.3; cursor: not-allowed; }
</style>
</head>
<body>

<div id="intro-page">
  <header class="header">
    <div class="header-logo">陆</div>
    <div>
      <div style="font-size: 16px; letter-spacing: 1px;">陆大夫逆龄管理</div>
      <div style="font-size: 10px; color: var(--gold-light)">Age Reversal Medicine</div>
    </div>
  </header>

  <section class="hero">
    <h1>你的身体，<em>真实年龄</em>是多少？</h1>
    <p style="margin-top: 20px; opacity: 0.8; font-size: 14px;">基于最新端粒长度与代谢速率模型评估</p>
    <button class="btn-submit" style="max-width: 200px;" onclick="startQuiz()">立即开始评估</button>
  </section>
</div>

<div id="quiz-page" style="display:none;">
  <div class="progress-wrap">
    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px;">
      <span>评估进度</span><span id="progress-text">0 / 20</span>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>

  <main class="main" id="question-container">
    </main>

  <div class="main" id="submit-area" style="display:none; padding-top: 0;">
    <div class="question-block" style="text-align: center;">
      <label style="font-size: 14px; cursor: pointer;">
        <input type="checkbox" id="privacy-check" onchange="toggleSubmitBtn()"> 我确认以上信息用于匿名健康分析
      </label>
      <button class="btn-submit" id="btn-final-submit" disabled onclick="calculateAge()">查看深度报告</button>
    </div>
  </div>
</div>

<div id="result-page" class="main">
  <div class="result-hero">
    <p style="letter-spacing: 2px; font-size: 14px; color: var(--gold-light);">您的生理年龄约为</p>
    <div class="result-age" id="disp-bio-age">--</div>
    <p style="opacity: 0.6;">实际年龄: <span id="disp-real-age">--</span> 岁</p>
  </div>
  <div class="advice-card">
    <h3 style="margin-bottom: 15px; font-family: 'Noto Serif SC', serif;">陆大夫的逆龄建议：</h3>
    <div id="disp-advice" style="font-size: 15px; color: var(--ink-light); line-height: 1.8;">
      </div>
    <button class="btn-submit" onclick="location.reload()" style="background: none; color: var(--ink); margin-top: 30px;">重新测试</button>
  </div>
</div>

<script>
  // 这里请填入你原来的 20 道题文字内容
  const questionData = [
    { q: "与5年前相比，你的体重变化如何？", options: ["稳定 (±2kg)", "增加超过 5kg", "减轻超过 5kg"], scores: [0, 2, 1] },
    { q: "您每天的蔬菜摄入量是否达到 300g？", options: ["是的，每天都有", "偶尔达到", "很少吃蔬菜"], scores: [0, 1, 2] },
    { q: "您的睡眠质量如何？", options: ["一觉到天亮", "偶尔失眠", "经常熬夜或易醒"], scores: [0, 1, 2] },
    { q: "您每周进行几次超过 30 分钟的运动？", options: ["3次以上", "1-2次", "基本不运动"], scores: [0, 1, 2] },
    { q: "您感到压力大的频率？", options: ["很少", "有时", "几乎每天"], scores: [0, 1, 2] },
    { q: "是否有吸烟或频繁饮酒的习惯？", options: ["从不", "偶尔", "经常"], scores: [0, 1, 2] },
    { q: "您的皮肤弹性与光泽感？", options: ["较好", "一般", "明显下降"], scores: [0, 1, 2] },
    { q: "您的消化系统状况？", options: ["很顺畅", "偶尔不适", "经常胀气或便秘"], scores: [0, 1, 2] },
    { q: "您的记忆力与专注度？", options: ["依然敏锐", "偶尔断片", "明显下降"], scores: [0, 1, 2] },
    { q: "您日常感觉精力充沛吗？", options: ["整天都很有活力", "下午容易疲劳", "经常感觉很累"], scores: [0, 1, 2] },
    { q: "您的关节是否经常僵硬或疼痛？", options: ["从不", "偶尔", "经常"], scores: [0, 1, 2] },
    { q: "您对甜食或高碳水食物的依赖度？", options: ["较低", "中等", "非常喜欢"], scores: [0, 1, 2] },
    { q: "您的直系亲属是否有长寿史？", options: ["有（多位85+）", "一般", "较少"], scores: [0, 1, 2] },
    { q: "您日常用药或补充剂的情况？", options: ["很少用药", "偶尔服用", "长期依赖多种"], scores: [0, 1, 2] },
    { q: "您的视力或听力近年来有无明显退化？", options: ["无明显变化", "轻微退化", "退化严重"], scores: [0, 1, 2] },
    { q: "您平均每天坐着的时间？", options: ["小于4小时", "4-8小时", "大于8小时"], scores: [0, 1, 2] },
    { q: "您的出生年份（年）", isInput: true },
    { q: "您的身高（cm）", isInput: true, placeholder: "170" },
    { q: "您的体重（kg）", isInput: true, placeholder: "65" },
    { q: "您目前最希望改善的目标是？", options: ["精力与体能", "皮肤与容貌", "慢性病预防"], scores: [0, 0, 0] }
  ];

  let userAnswers = {};

  function startQuiz() {
    document.getElementById('intro-page').style.display = 'none';
    document.getElementById('quiz-page').style.display = 'block';
    renderQuestions();
  }

  function renderQuestions() {
    const container = document.getElementById('question-container');
    questionData.forEach((item, index) => {
      const qId = index + 1;
      const block = document.createElement('div');
      block.className = 'question-block';
      block.id = `q-block-${qId}`;
      
      let content = `<div class="q-text">Q${qId}. ${item.q}</div>`;
      
      if (item.isInput) {
        content += `<input type="number" class="date-input" placeholder="${item.placeholder || '1985'}" oninput="saveInput(${qId}, this.value)">`;
      } else {
        content += `<div class="q-options">`;
        item.options.forEach((opt, optIdx) => {
          content += `<div class="q-option" onclick="saveSelect(${qId}, ${item.scores[optIdx]}, this)">${opt}</div>`;
        });
        content += `</div>`;
      }
      block.innerHTML = content;
      container.appendChild(block);
    });
  }

  function saveSelect(qid, score, el) {
    userAnswers[qid] = score;
    const parent = el.parentElement;
    parent.querySelectorAll('.q-option').forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
    el.closest('.question-block').classList.add('active');
    updateProgress();
  }

  function saveInput(qid, val) {
    if (val && val > 0) {
      userAnswers[qid] = parseInt(val);
      document.getElementById(`q-block-${qid}`).classList.add('active');
    } else {
      delete userAnswers[qid];
      document.getElementById(`q-block-${qid}`).classList.remove('active');
    }
    updateProgress();
  }

  function updateProgress() {
    const count = Object.keys(userAnswers).length;
    const percent = (count / 20) * 100;
    document.getElementById('progress-fill').style.width = percent + '%';
    document.getElementById('progress-text').innerText = `${count} / 20`;
    
    if (count >= 18) { // 留一点容错，防止用户卡死
      document.getElementById('submit-area').style.display = 'block';
    }
  }

  function toggleSubmitBtn() {
    const checked = document.getElementById('privacy-check').checked;
    document.getElementById('btn-final-submit').disabled = !checked;
  }

  function calculateAge() {
    const currentYear = new Date().getFullYear();
    const birthYear = userAnswers[17] || (currentYear - 35);
    const realAge = currentYear - birthYear;
    
    let extraYears = 0;
    Object.keys(userAnswers).forEach(key => {
      if (![17, 18, 19, 20].includes(parseInt(key))) {
        extraYears += userAnswers[key];
      }
    });

    const bioAge = Math.max(18, realAge + (extraYears / 2.5) - 2);
    
    // 展现结果
    document.getElementById('quiz-page').style.display = 'none';
    document.getElementById('result-page').style.display = 'block';
    document.getElementById('disp-bio-age').innerText = Math.round(bioAge);
    document.getElementById('disp-real-age').innerText = realAge;
    
    // 原始意见
    document.getElementById('disp-advice').innerHTML = `
      <p>• <b>代谢管理</b>：您的评估结果显示抗氧化能力有待提升，建议增加深色蔬菜比例。</p>
      <p>• <b>睡眠修复</b>：生理年龄的逆转高度依赖深度睡眠，请尝试固定作息。</p>
      <p>• <b>运动策略</b>：建议每周加入 2 次抗阻力训练，维持肌肉量是逆龄的关键。</p>
    `;
    window.scrollTo(0, 0);
  }
</script>
</body>
</html>
